# 눈 검출 및 크롭 도구
이 스크립트는 얼굴 이미지를 처리하여 왼쪽 및 오른쪽 눈을 검출하고, 크롭하여 저장하는 기능을 제공합니다. 
Mediapipe 라이브러리를 사용하여 얼굴 랜드마크를 탐지하고, 얼굴을 크롭하고 눈을 검출하며, 동공의 위치를 분석하는 작업을 수행합니다.



## 주요 기능
입력 이미지에서 얼굴을 검출하고 얼굴 영역을 크롭.
눈의 위치를 탐지하고, 설정된 크기로 눈 이미지를 리사이즈.
왼쪽 및 오른쪽 눈 이미지를 결합하여 출력.
동공 위치를 분석하여 시선 방향(왼쪽, 오른쪽, 위, 아래, 중앙)을 결정.
처리된 눈 이미지 및 동공 위치 정보를 저장.


## 요구 사항
스크립트는 다음의 Python 라이브러리를 필요로 합니다:

OpenCV (cv2)
Mediapipe (mediapipe)
Numpy (numpy)
PIL (Python Imaging Library)



## 입력 및 출력 구조
입력 폴더: 기본 입력 폴더에는 사용자별로 서브 폴더가 존재하며, 각 서브 폴더에는 사용자의 얼굴 이미지 파일들(PNG, JPG, JPEG 형식)이 위치합니다.
출력 폴더: 크롭된 눈 이미지, 결합된 눈 이미지, 동공 상태 정보가 저장된 텍스트 파일이 해당 사용자 이름의 출력 폴더에 저장됩니다.


## 주요 상수
PADDING: 눈 영역 주변에 추가할 여백의 크기.
FACE_SIZE: 얼굴 크롭 후 리사이즈할 이미지 크기 (1024x1024).
FINAL_SIZE: 최종 눈 이미지의 크기 (32x32).
threshold_X / threshold_Y: 동공 위치에 따라 시선 방향을 결정할 임계값.


## 함수 설명
#### 1. crop_face(image, detection)
얼굴 검출 결과를 바탕으로 입력 이미지에서 얼굴을 크롭합니다.

#### 2. detect_eyes(face_image)
제공된 얼굴 이미지에서 눈 랜드마크를 탐지합니다.

#### 3. extract_eye_image(image, eye_points)
주어진 눈 랜드마크를 기준으로 눈 이미지를 추출하고 리사이즈합니다.

#### 4. combine_eyes(left_eye, right_eye)
왼쪽 눈과 오른쪽 눈 이미지를 결합한 후 리사이즈합니다.

#### 5. calculate_eye_center(face_landmarks, eye_indices, image_shape)
얼굴 랜드마크를 기반으로 눈의 중심 좌표를 계산합니다.

#### 6. determine_iris_position(eye_center, iris_center)
눈 중심과 동공 위치를 기준으로 시선 방향을 결정합니다.



## 실행 방법
기본 입력 폴더에 사용자별로 얼굴 이미지 파일을 준비합니다.
스크립트를 실행하면 각 사용자의 이미지에 대해 얼굴과 눈을 검출하고, 처리된 결과가 출력 폴더에 저장됩니다.
처리된 이미지와 동공 정보가 각각의 출력 폴더에 저장됩니다.



### 실행 예시
스크립트가 실행되면 각 사용자 폴더에 대한 이미지 처리가 완료되며, 출력 경로에 다음 파일들이 저장됩니다:

결합된 눈 이미지: 사용자의 왼쪽 및 오른쪽 눈 이미지를 결합한 이미지.
왼쪽 및 오른쪽 눈 이미지: 각각 크롭된 눈 이미지.
동공 상태 정보 파일: 왼쪽과 오른쪽 눈의 동공 위치를 기반으로 한 시선 방향 정보.
